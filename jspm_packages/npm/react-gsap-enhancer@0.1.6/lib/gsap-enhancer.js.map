{"version":3,"sources":["../src/gsap-enhancer.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;0BAAuB,cAAc;;;;yBACf,aAAa;;;;4BACV,gBAAgB;;;;qBAMlC,SAAS;;qBAED,UAAU,kBAAkB,EAAE;AAC3C,MACE,kBAAkB,IAClB,kBAAkB,CAAC,SAAS,IAC5B,kBAAkB,CAAC,SAAS,CAAC,MAAM,EACnC;AACA,QAAM,iBAAiB,GAAG,kBAAkB,CAAA;AAC5C,WAAO,OAAO,CAAC,SAAS,EAAE,iBAAiB,CAAC,CAAA;GAC7C,MACI;AACH,WAAO,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE,kBAAkB,CAAC,CAAA;GACnD;CACF;;AAED,SAAS,OAAO,CAAE,kBAAkB,EAAE,iBAAiB,EAAE;MACjD,YAAY;cAAZ,YAAY;;AACL,aADP,YAAY,CACJ,KAAK,EAAE;;;4BADf,YAAY;;AAEd,iCAFE,YAAY,6CAER,KAAK,EAAC;;WAMd,YAAY,GAAG,UAAC,mBAAmB,EAAE,OAAO,EAAK;;AAE/C,YAAM,SAAS,GAAG,MAAK,oBAAoB,CAAA;AAC3C,YAAI,SAAS,IAAI,SAAS,CAAC,mBAAmB,CAAC,EAAE;AAC/C,6BAAmB,GAAG,SAAS,CAAC,mBAAmB,CAAC,CAAA;SACrD;;AAED,YAAM,MAAM,GAAG,+BAAa,MAAK,UAAU,CAAC,CAAC,IAAI,EAAE,CAAA;AACnD,YAAM,SAAS,GAAG,2BAChB,mBAAmB,EACnB,OAAO,EACP,MAAM,EACN;iBAAM,wBACJ,MAAK,UAAU,EACf,MAAK,mBAAmB,CACzB;SAAA,CACF,CAAA;AACD,cAAK,mBAAmB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAA;;AAEvC,cAAK,WAAW,EAAE,CAAA;;AAElB,eAAO,SAAS,CAAA;OACjB;;AA3BC,UAAI,CAAC,UAAU,GAAG,IAAI,GAAG,EAAE,CAAA;AAC3B,UAAI,CAAC,mBAAmB,GAAG,IAAI,GAAG,EAAE,CAAA;AACpC,UAAI,CAAC,oBAAoB,GAAG,kBAAkB,CAAA;KAC/C;;;;;;;;;;;;;;;;;;;iBANG,YAAY;;aAgCD,yBAAC,SAAS,EAAE;AACzB,iBAAS,CAAC,IAAI,EAAE,CAAA;AAChB,YAAI,CAAC,mBAAmB,UAAO,CAAC,SAAS,CAAC,CAAA;;AAE1C,YAAI,CAAC,WAAW,EAAE,CAAA;OACnB;;;aAEgB,6BAAU;AACzB,uCAAmB,IAAI,CAAC,UAAU,CAAC,CAAA;;AAEnC,uCA1CE,YAAY,yCA0Ce;4CAHV,IAAI;AAAJ,gBAAI;;;AAIrB,qCA3CA,YAAY,oDA2Ce,IAAI,EAAC;SACjC;OACF;;;aAEkB,+BAAU;AAC3B,0CAAsB,IAAI,CAAC,UAAU,CAAC,CAAA;;AAEtC,uCAlDE,YAAY,2CAkDiB;6CAHV,IAAI;AAAJ,gBAAI;;;AAIvB,qCAnDA,YAAY,sDAmDiB,IAAI,EAAC;SACnC;OACF;;;aAEK,kBAAU;2CAAN,IAAI;AAAJ,cAAI;;;AACZ,eAAO,wDAxDL,YAAY,yCAwDoB,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAA;OAC1D;;;aAEiB,8BAAU;AAC1B,uCAAmB,IAAI,CAAC,UAAU,CAAC,CAAA;AACnC,8BAAU,IAAI,CAAC,mBAAmB,CAAC,CAAA;;AAEnC,uCA/DE,YAAY,0CA+DgB;6CAJV,IAAI;AAAJ,gBAAI;;;AAKtB,qCAhEA,YAAY,qDAgEgB,IAAI,EAAC;SAClC;OACF;;;WAlEG,YAAY;KAAS,iBAAiB;;AAuF5C,MAAI,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,EAAE;;;;AAIzC,UAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,UAAA,GAAG,EAAI;AACtD,UAAI,CAAC,YAAY,CAAC,SAAS,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;AAC/C,YAAI,UAAU,GAAG,MAAM,CAAC,wBAAwB,CAAC,iBAAiB,CAAC,SAAS,EAAE,GAAG,CAAC,CAAA;AAClF,cAAM,CAAC,cAAc,CAAC,YAAY,CAAC,SAAS,EAAE,GAAG,EAAE,UAAU,CAAC,CAAA;OAC/D;KACF,CAAC,CAAA;GACH;;AAED,SAAO,YAAY,CAAA;CACpB","file":"gsap-enhancer.js","sourcesContent":["import attachRefs from './attachRefs'\nimport Animation from './Animation'\nimport createTarget from './createTarget'\nimport {\n  reattachAll,\n  attachAll,\n  restoreRenderedStyles,\n  saveRenderedStyles\n} from './utils'\n\nexport default function (animationSourceMap) {\n  if (\n    animationSourceMap &&\n    animationSourceMap.prototype &&\n    animationSourceMap.prototype.render\n  ) {\n    const ComposedComponent = animationSourceMap\n    return enhance(undefined, ComposedComponent)\n  }\n  else {\n    return enhance.bind(undefined, animationSourceMap)\n  }\n}\n\nfunction enhance (animationSourceMap, ComposedComponent) {\n  class GSAPEnhancer extends ComposedComponent {\n    constructor(props) {\n      super(props)\n      this.__itemTree = new Map()\n      this.__runningAnimations = new Set()\n      this.__animationSourceMap = animationSourceMap\n    }\n\n    addAnimation = (createGSAPAnimation, options) => {\n      //if the animation is in the source map the if from there\n      const sourceMap = this.__animationSourceMap\n      if (sourceMap && sourceMap[createGSAPAnimation]) {\n        createGSAPAnimation = sourceMap[createGSAPAnimation]\n      }\n\n      const target = createTarget(this.__itemTree).find()\n      const animation = new Animation(\n        createGSAPAnimation,\n        options,\n        target,\n        () => reattachAll(\n          this.__itemTree,\n          this.__runningAnimations\n        ),\n      )\n      this.__runningAnimations.add(animation)\n      //the animation will be attached on the next render so force the update\n      this.forceUpdate()\n\n      return animation\n    }\n\n    removeAnimation(animation) {\n      animation.kill()\n      this.__runningAnimations.delete(animation)\n      //rerender the component without the animation\n      this.forceUpdate()\n    }\n\n    componentDidMount(...args) {\n      saveRenderedStyles(this.__itemTree)\n\n      if (super.componentDidMount) {\n        super.componentDidMount(...args)\n      }\n    }\n\n    componentWillUpdate(...args) {\n      restoreRenderedStyles(this.__itemTree)\n\n      if (super.componentWillUpdate) {\n        super.componentWillUpdate(...args)\n      }\n    }\n\n    render(...args) {\n      return attachRefs(super.render(...args), this.__itemTree)\n    }\n\n    componentDidUpdate(...args) {\n      saveRenderedStyles(this.__itemTree)\n      attachAll(this.__runningAnimations)\n\n      if (super.componentDidUpdate) {\n        super.componentDidUpdate(...args)\n      }\n    }\n  }\n\n\n  // Class inheritance uses Object.create and because of __proto__ issues\n  // with IE <10 any static properties of the superclass aren't inherited and\n  // so need to be manually populated\n  // See http://babeljs.io/docs/advanced/caveats/#classes-10-and-below-\n  // var staticKeys = [\n  //   'defaultProps',\n  //   'propTypes',\n  //   'contextTypes',\n  //   'childContextTypes'\n  // ]\n  //\n  // staticKeys.forEach((key) => {\n  //   if (ComposedComponent.hasOwnProperty(key)) {\n  //     GSAPEnhancer[key] = ComposedComponent[key]\n  //   }\n  // })\n\n  if (process.env.NODE_ENV !== 'production') {\n  // This fixes React Hot Loader by exposing the original components top level\n  // prototype methods on the Radium enhanced prototype as discussed in #219.\n    // https://github.com/FormidableLabs/radium/issues/219\n    Object.keys(ComposedComponent.prototype).forEach(key => {\n      if (!GSAPEnhancer.prototype.hasOwnProperty(key)) {\n        var descriptor = Object.getOwnPropertyDescriptor(ComposedComponent.prototype, key)\n        Object.defineProperty(GSAPEnhancer.prototype, key, descriptor)\n      }\n    })\n  }\n\n  return GSAPEnhancer\n}\n"]}